---
title: "Linstat-strikk"
author: "Ellisiv"
date: "31 mars 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction
  Memory is one of the most important features of the human brain. Without it humans would not be able to learn anything, and it is necessary for the daily functionality. 
  An important part of the memory is the short-term memory, which is the brains capacity to remeber a small amount of information for a small period of time. From before we know that the short-term memory has about the capacity to remember seven, plus or minus two, items at the same time. Our goal is to test wheter this holds or not. 


Dette er det gamle jeg skrev: bare har det her for å sjekke at vi har fått med alt.
 * Description
 In this project we will have a look at different parameters affec ting the memory of a person. The person will get a list of numbers, and the aim is to remember as many of the numbers in a given time, in the right order. Then there will be a 15 seconds break, followed by her writing down the numbers with a time limit of 20 seconds. The response variable is the the amount of numbers she can remember, where the last number that is right is the response. The factors that will vary are the time she gets to look at the numbers, 30 seconds and one minute, wheter she can use any aids while memorizing, if there are any distrubances during the break and wheter she is using shoes or not. 

 * What is interesting, what do we know in advance, what do we want to achieve?
 Memory is an interresting topic, and highly relevant for students. Also, it could be an advantage for the test person to know how she memorizes best. Noen som har noe mer å skrive her??
 We think that the time you get to memorize the numbers and wheter you get to use aids or not, will be important factors. We also expect the consentration to weaken durint the test/forsøk/hva kaller vi det??. Therefor the order of the different factors should be random, and preferably in different orders in the two blocks. Also, we used two diffrent persons in the two blocks, and would therefor expect them to be (annerledes??? at de har noe å si på modellen, hvordan sier man det?)
 We want to see if our assumptions coincide with our findings.  


# Selection of factors
  The first thing we tested was to memorize words. A list of wors was given to the test person, from which she tried to memorize as many words as possible. This was tested with different factors, and two different persons. Each time the number of words memorized, without exception, was six. Hence, we decided to give the same experiment a try, only exchanging worsd with digits. This resulted in a much higher variance than when we tried memorizing words. 
  The factors we think are relevant when testing the short term memory is the amount of time the test person gets to look at the digits, wheter the person is disturbed between memorizing and writing down the digits or not and wheter she is allowed to use aids, such as pen and paper, while looking at the digits. 
  We expect an interraction between time and aid, thinking that they will amplify each other. For each of the factors we think that two levels will be the most suitable, i.e. short and long time to look at the digits, disturbance or not between looking at the digits and writing the down and wheter she gets to use aids or not. One could argue for three levelsof time, but we believe that two levels will be suficient if one for example double the amount of time.
  Also, we think that it is easy to control that the factors are at the desired level since we can measure the time, choose to use aids or not and we can make sure of disturbance or not our self. 

# Selection of response
  A response variable that will give the information we need is the number of digits the test person remembers in the right order until the first mistake, meaning that if the first digit is wrong, you get Y equal to zero, regardless of the correctness of the next digits. In theory the test person gets an infinite number of digits, but since time is limited, on can also limit the number of digits given, and still count it as infinite. One could also chose to get a finite number of digits or numbers, and count the amount that is in the right spot. 
  
  As mentioned, one could also count words instead of digits. Also, we choose to count the numbers in a sequence that are at the right spot, meaning that the first spot with 
  
  the response Y is the number of digits the test person remembers in the right order until the first mistake, meaning that if the first digit is wrong, you get Y equal to zero, no mattter if the next digits are rightly placed. 
  there is no room for mistakes. 
  
  Do we have a suggestion for other response variables???? kan måle hukommlese på mange forskjellig måter. finner forskjllige ting for ord og tall feks. i tillegg: begynte forresrt og stoppet på den første man ikke hukset. kunne gjort dette annerledes. fyll ut. 
  
  
  What can ypu say about the accuracy of these measurements?
  skal jeg her ta med typ måleusikkerheten? altså: noen tallrekker er lettere å huske en andre, at testpersonen blir sliten etterhvert, noen flere ting???
  har 100% accuracy fordi det er kjempelett å få til hvr mange man får til. skriv dette. 



# Choice of design 
We choose a full $2^k$ factorial experiments with replicate because of the simple nature of the experiment. One full trial does not need complicated equipment and replication causes minimal resources. The only problem with doing multiple experiments is that the test person gets tired and it is hard to reset between rounds. Because of that we choose to use two different test people and do one full trial with both of them. The result is a $2^4$ factorial design with $2^5$ experiments. 

Because of the simplicity of the experiments, it is not so hard do do a full trial and we that was the reason for choosing a full $2^k$ factorial design. To be able to analyze the results . We chose to do two full trials on the same day and on the same place to get as equal surroundings as possible. Nevertheless we chose a block design because we ran the two trials with two different test people. This was because it is hard to concentrate for a long period of time and we were afraid that exhaustion would influence the results and be hard to compensate for. With a block design where the test person represents a block we hop

# Implementation
Ellisiv

# Set-up

```{r design, include=T}
#install.packages('FrF2')
library(FrF2)

plan <- FrF2(nruns = 32, nfactors=5, randomize = F)
#ykast <- c(2.22, 4.50, 2.88, 4.07, 2.30, 2.34, 2.00, 2.47, 2.60, 1.60, 3.98, 3.38, 2.82, 2.61, 1.88, 3.20, 2.63, 2.22, 3.38, 6.00, 4.06, 1.53, 5.70, 5.30, 2.01, 1.82, 2.60, 7.0, 1.57, 3.20, 4.00, 2.49)

y <- c(9, 9, 9, 4, 6, 15, 6, 3, 11, 15, 12, 12, 5, 12, 6, 1, 9, 15, 9, 11, 12, 12, 6, 12, 12, 0.01, 9, 15, 7, 15, 6, 9)
plan <- add.response(plan, y)
#plan <- plan[, -4]
lm4 <- lm(y~(A + B + C + D)^4 + E, data=plan)
summary(lm4)
effects <- lm4$coeff*2
DanielPlot(lm4)
MEPlot(lm4)
#IAPlot(lm4)
cubePlot(lm4,"A","B","C")

effects <- 2*lm4$coefficients[-1] # omit intercept
abseffects<-abs(effects)
medabseffects <- median(abseffects)
tauest <- 1.5*medabseffects
keepeffects <- abseffects[abseffects< 2.5*tauest]
taustar <- 1.5*median(keepeffects)
alpha<-0.05 # significance level
cutoff<-qt(1-alpha/2,length(abseffects)/3)*taustar
cutoff
effects 

sig <- which(abseffects>cutoff)
DanielPlot(lm4,autolab=FALSE,faclab=list(idx=sig,lab=(paste("   ",attr(lm4$terms,"term.labels"))[sig])))

rres <- rstudent(lm4)
plot(lm4$fitted,rres)

qqnorm(rres)
qqline(rres)
library(nortest)
ad.test(rstudent(lm4))

```

```{r}
library(leaps)
allsubs <- regsubsets(y~(A + B + C + D)^2 + E, data = plan , nvmax = 16)
allsummary <- summary(allsubs)
allsummary$outmat

plot(allsummary$bic)
allsummary$bic

which.min(allsummary$bic)

plot(allsubs, scale = "bic")
plot(allsummary$adjr2)
allsummary$adjr2

which.max(allsummary$adjr2)

plot(allsubs, scale = "adjr2")

```

