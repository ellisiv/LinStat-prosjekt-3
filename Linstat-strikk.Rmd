---
title: "Digit-memorization"
author: "Ellisiv Sætherø Steen, Johanne Skogvang"
date: "05/03 2019"
output: html_document
---

# Introduction
  Memory is one of the most important features of the human brain. Without it humans would not be able to learn anything, and it is necessary for the daily functionality. 
  An important part of the memory is the short-term memory, which is the brains capacity to remeber a small amount of information for a small period of time. From before we know that the short-term memory has about the capacity to remember seven, plus or minus two, items at the same time. Our goal is to test wheter this holds or not. 


Dette er det gamle jeg skrev: bare har det her for å sjekke at vi har fått med alt.
 * Description
 In this project we will have a look at different parameters affec ting the memory of a person. The person will get a list of numbers, and the aim is to remember as many of the numbers in a given time, in the right order. Then there will be a 15 seconds break, followed by her writing down the numbers with a time limit of 20 seconds. The response variable is the the amount of numbers she can remember, where the last number that is right is the response. The factors that will vary are the time she gets to look at the numbers, 30 seconds and one minute, wheter she can use any aids while memorizing, if there are any distrubances during the break and wheter she is using shoes or not. 

 * What is interesting, what do we know in advance, what do we want to achieve?
 Memory is an interresting topic, and highly relevant for students. Also, it could be an advantage for the test person to know how she memorizes best. Noen som har noe mer å skrive her??
 We think that the time you get to memorize the numbers and wheter you get to use aids or not, will be important factors. We also expect the consentration to weaken durint the test/forsøk/hva kaller vi det??. Therefor the order of the different factors should be random, and preferably in different orders in the two blocks. Also, we used two diffrent persons in the two blocks, and would therefor expect them to be (annerledes??? at de har noe å si på modellen, hvordan sier man det?)
 We want to see if our assumptions coincide with our findings.  


# Selection of factors
  The first thing we tested was to memorize words. A list of wors was given to the test person, from which she tried to memorize as many words as possible. This was tested with different factors, and two different persons. Each time the number of words memorized, without exception, was six. Hence, we decided to give the same experiment a try, only exchanging worsd with digits. This resulted in a much higher variance than when we tried memorizing words. 
  The factors we think are relevant when testing the short term memory is the amount of time the test person gets to look at the digits, wheter the person is disturbed between memorizing and writing down the digits or not and wheter she is allowed to use aids, such as pen and paper, while looking at the digits. 
  We expect an interraction between time and aid, thinking that they will amplify each other. For each of the factors we think that two levels will be the most suitable, i.e. short and long time to look at the digits, disturbance or not between looking at the digits and writing the down and wheter she gets to use aids or not. One could argue for three levelsof time, but we believe that two levels will be suficient if one for example double the amount of time.
  Also, we think that it is easy to control that the factors are at the desired level since we can measure the time, choose to use aids or not and we can make sure of disturbance or not our self. 

# Selection of response
  A response variable that will give the information we need is the number of digits the test person remembers in the right order until the first mistake, meaning that if the first digit is wrong, you get Y equal to zero, regardless of the correctness of the next digits. In theory the test person gets an infinite number of digits, but since time is limited, on can also limit the number of digits given, and still count it as infinite. One could also chose to get a finite number of digits or numbers, and count the amount that is in the right spot. 
  
  As mentioned, one could also count words instead of digits. Also, we choose to count the numbers in a sequence that are at the right spot, meaning that the first spot with 
  
  the response Y is the number of digits the test person remembers in the right order until the first mistake, meaning that if the first digit is wrong, you get Y equal to zero, no mattter if the next digits are rightly placed. 
  there is no room for mistakes. 
  
  Do we have a suggestion for other response variables???? kan måle hukommlese på mange forskjellig måter. finner forskjllige ting for ord og tall feks. i tillegg: begynte forresrt og stoppet på den første man ikke hukset. kunne gjort dette annerledes. fyll ut. 
  
  How can the response variable be measured? Føler jeg egntlig har sagt det ganske klart.? hva synes du ellisiv?
  
  What can ypu say about the accuracy of these measurements?
  skal jeg her ta med typ måleusikkerheten? altså: noen tallrekker er lettere å huske en andre, at testpersonen blir sliten etterhvert, noen flere ting???



# Choice of design 
We choose a full $2^k$ factorial experiments with replicate because of the simple nature of the experiment. One full trial does not need complicated equipment and replication causes minimal resources. The only problem with doing multiple experiments is that the test person gets tired and it is hard to reset between rounds. Because of that we choose to use two different test people and do one full trial with both of them. The result is a $2^4$ factorial design with $2^5$ experiments. Because of the different test people it is necessary to divide the design into two blocks, one block representing a test person. This is needed because the memory of the test people can differ, so the block factor needs to compensate for this. 

# Experimental set-up
We chose the factors discussed above, but the value of the two levels needs to be determined and we need to choose some guidelines to make the experiments consistent. The two time intervals needs to be sufficiently different, but at the same time we do not want to have too long time intervals to cause as little as possible exhaustion for the test persons. We decide on the short interval, coded as $time = -1$, to be $30$sec and the long time interval, coded as $time = 1$, to be $60$sec. The aids provided is pen and paper and the possibility of speaking out loud. To not make this a writing contest the paper is taken away from the test person after the time for memorizing is up. To make the task a bit more challenging the test people get 15 seconds break between momorizing and writing down their final answer. This time is constant and is thus not a factor in our trials. It is also in this period the person could be disturbed. After some discussion we choose that there should just be loud talking in the background which needs no respons from the test person, or else it would be too hard to remember anything.  
To explore the quality of our experiments, we include a variable which we assume will have no effect on the result, which is if the test person is wearing shoes. Because we do a limited amount of experiments it is interessting to see if the random variable will be included in the final model we choose. To minimize the influence of the experimental order and to exlude time as a factor we randomize the order of the experiments for both trials.  
There are several challenges when measuring the response variable. First of all the digits needs to be totally random and different every time. To solve this we use the functionality of the web-page Wolfram-Alpha. For every test run it generates a new random number with 40 digits which makes the test runs independent. Another challenge is the measurement of the quality of the response. What if the first digits are wrong, but others are rightly placed? And what if a digit is excluded and that shifts the order of the rest of the answer? To make the rules simple and consistent, we then decided the response, $y$, to be the number of digits rightly guessed up to the first mistake. 

# Results

```{r design, include=T}
#install.packages('FrF2')
library(FrF2)

plan <- FrF2(nruns = 32, nfactors=5, randomize = F)

y <- c(9, 9, 9, 4, 6, 15, 6, 3, 11, 15, 12, 12, 5, 12, 6, 1, 9, 15, 9, 11, 12, 12, 6, 12, 12, 0, 9, 15, 7, 15, 6, 9)
plan <- add.response(plan, y)
#plan <- plan[, -4]
lm4 <- lm(y~(A + B + C + D)^4 + E, data=plan)
summary(lm4)

```
The results of the experiment is shown above in the summary.  
A1 = Long time for memorization  
B1 = Available aids  
C1 = Presence of disturbance  
D1 = Wearing shoes
E = Block factor/test person  
Here we also find the coefficients for the full model with all interactions:
$$y_i = 9.19 + 0.81A - 1.06B - 0.88C + 0D + 0.75E - 0.56AB + 0.75AC - 0.12AD  - 1.12BC + 0.62BD-0.69CD-0.87ABC + 0.37ABD+0.19ACD-0.56BCD-1.06ABCD$$
It is very important to notice that none of these factors are consideres significant for the model. This means that from these results, we can not really present any results based on our data. Nevertheless, our full model has provided some new insight and we will use some time to find the factors we see as most likely to have effect on the response. But first we will take a closer look at the full model provided above and discuss what could have caused the lack of results.

## Experimental weaknesses  
```{r residual plot}
rres <- rstudent(lm4)
plot(lm4$fitted,rres, title("Residual plot"))

qqnorm(rres)
qqline(rres)

library(nortest)
ad.test(rstudent(lm4))

```

We look at the residual plot and the Anderson-Darling test and see that our residuals does not look very normally distributed. This is probably caused by some very unlikely obeservation and we therefore discuss what went wrong in the experiment to try to find an explaination. The implementation went more or less as we planned. It happened in the first trial that we read the randomized design matrix wrong and thus switched the order of two of the tests. As we see it, this did not affect the trial because the order was random and thus a random switch will not lead to a loss of randomization. We also observed that some sequences of digits were easier to remember than others. Also, the number generator had an output of blocks of three digits, and thus there were an overrepresentation in the responses of numbers dividable of three. It is also possible that the blocks made it easier to remember. These kind of factors could have lead to some extreme observations. Additionally we had some problems because of our simple measurement of response. One time the test person failed to remember the first digit, whih lead to $y=0$ even though the person remembered many other digits right.  
Also the experiment was done in unpredictable surroundings, where people walked by and talked among other things. It was therefore a bit variety in the disturbance-factor, but it was not much difference and because of the random order, it is not unreasonable to assume that this did not affect the result much.
We conclude that the observation deviating the most from what we could expect is the observation $y_{26}=0$. 


```{r manipulation of data}

effects <- lm4$coeff*2
DanielPlot(lm4)
MEPlot(lm4)
IAPlot(lm4)
cubePlot(lm4,"A","B","C")

effects <- 2*lm4$coefficients[-1] # omit intercept
abseffects<-abs(effects)
medabseffects <- median(abseffects)
tauest <- 1.5*medabseffects
keepeffects <- abseffects[abseffects< 2.5*tauest]
taustar <- 1.5*median(keepeffects)
alpha<-0.05 # significance level
cutoff<-qt(1-alpha/2,length(abseffects)/3)*taustar
cutoff
effects 

sig <- which(abseffects>cutoff)
DanielPlot(lm4,autolab=FALSE,faclab=list(idx=sig,lab=(paste("   ",attr(lm4$terms,"term.labels"))[sig])))

rres <- rstudent(lm4)
plot(lm4$fitted,rres)

qqnorm(rres)
qqline(rres)
library(nortest)
ad.test(rstudent(lm4))

```


```{r}
library(leaps)
allsubs <- regsubsets(y~(A + B + C + D)^4 + E, data = plan , nvmax = 16)
allsummary <- summary(allsubs)
allsummary$outmat

plot(allsummary$bic)
allsummary$bic

which.min(allsummary$bic)

plot(allsubs, scale = "bic")
plot(allsummary$adjr2)
allsummary$adjr2

which.max(allsummary$adjr2)

plot(allsubs, scale = "adjr2")

```

